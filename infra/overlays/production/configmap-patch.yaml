apiVersion: v1
kind: ConfigMap
metadata:
  name: hack-notification-config
  namespace: notification-prod
data:
  # Kafka de produção (cluster dedicado, multi-broker)
  kafka.bootstrap-servers: "kafka-prod-broker-1:9092,kafka-prod-broker-2:9092,kafka-prod-broker-3:9092"
  kafka.group-id: "notification-service"

  # Tópicos de produção (sem prefixo de ambiente)
  topic.video-failed: "video.failed.v1"
  topic.video-failed-dlq: "video.failed.v1.dlq"

  # Retry conservador em produção
  notification.retry.max-attempts: "5"
  notification.retry.backoff-ms: "2000"

  # Logs mínimos em produção (WARN)
  logging.level.com.fiap.hacknotification: "WARN"
  logging.level.org.apache.kafka: "WARN"
  logging.level.org.springframework.kafka: "WARN"

  # JVM otimizado para produção
  java.opts: >-
    -XX:+UseContainerSupport
    -XX:MaxRAMPercentage=75.0
    -XX:+UseG1GC
    -XX:G1HeapRegionSize=16m
    -XX:+HeapDumpOnOutOfMemoryError
    -XX:HeapDumpPath=/tmp/heapdump.hprof
    -XX:+ExitOnOutOfMemoryError
    -Djava.security.egd=file:/dev/./urandom
    -Dfile.encoding=UTF-8
