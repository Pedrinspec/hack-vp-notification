apiVersion: v1
kind: ConfigMap
metadata:
  name: hack-notification-config
  namespace: notification-staging
data:
  # Kafka de staging (cluster compartilhado ou dedicado)
  kafka.bootstrap-servers: "kafka-staging.internal:9092"
  kafka.group-id: "notification-service-staging"

  # Tópicos de staging
  topic.video-failed: "stg.video.failed.v1"
  topic.video-failed-dlq: "stg.video.failed.v1.dlq"

  # Retry padrão
  notification.retry.max-attempts: "3"
  notification.retry.backoff-ms: "1000"

  # Logs moderados
  logging.level.com.fiap.hacknotification: "INFO"
  logging.level.org.apache.kafka: "WARN"
  logging.level.org.springframework.kafka: "INFO"

  # JVM configurado para staging
  java.opts: >-
    -XX:+UseContainerSupport
    -XX:MaxRAMPercentage=75.0
    -XX:+UseG1GC
    -XX:+HeapDumpOnOutOfMemoryError
    -XX:HeapDumpPath=/tmp/heapdump.hprof
    -Djava.security.egd=file:/dev/./urandom
